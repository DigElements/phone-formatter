<link rel="import" href="../polymer/polymer.html">

<!--
Polymer element used to add formatting to 10-digit phone numbers.


Example:

    <phone-formatter input="0123456789" format="parentheses"></phone-formatter>

@element phone-formatter
@demo demo/index.html
-->
<dom-module id="phone-formatter">
  <template>
    <span>{{output}}</span>
  </template>
</dom-module>

<script>

  Polymer({

    is: 'phone-formatter',

    properties: {

      /**
       * the 10-digit phone number to format. A string including a 10-digit phone number would also suffice,
       * and anything not matching that pattern will be ignored. 
       */
      input: {
        type: String
      },

      /**
       * A string used to determine how the user wants to format a phone number. If no format 
       * is specified, the result will be a phone number formatted with dashes. 
       * Options supported:
       * - default - results in 012-345-6789
       * - "parentheses" - results in (012) 345-6789
       * - "spaces" - results in 012 345 6789
       * - "periods" - results in 012.345.6789
       */
      format: {
        type: String, 
        value: 'dashes'
      },

      /**
       * Computed value of phone number input with formatting applied
       */
      output: {
        type: String,
        computed: 'computeOutput(input, format)'
      }

    },

    /**
     * Uses the format given to return the input formatted as a string
     */
    computeOutput: function(input, format) {
      if(!input) {
        return;
      }
        var replacementString;

        switch (format) {
          case 'parentheses': 
            replacementString = '($1) $2-$3';
            break;
          case 'spaces': 
            replacementString = '$1 $2 $3';
            break;
          case 'periods': 
            replacementString = '$1.$2.$3';
            break;
          default: 
            replacementString = '$1-$2-$3';
            break;
        }

        return input.replace(/(\d{3})(\d{3})(\d+)/, replacementString);
    }

  });

</script>
